## Перенос данных
### Оценка объема "КОПИИ"

Ограничения на объем копии задаются в файле:

    ./minibso/create/exp/prepare/insroot.sql 

Каждое ограничение это имя таблицы и клауза WHERE определяющая информацию для “КОПИИ”. Здесь же
можно избавиться от излишней громоздкой информации: история состояний
объекта, данные для отчетности и пр.

Все ограничения будут автоматически влиять на выборку данных из зависимых таблиц.
Если в атрибуте "hidden" задать значение "Y" ограничение исключается из такого влияния.
Ссылки на эту таблицу будут иметь значение NULL.

После задания ограничений переходим в minibso/create и
запускаем только этап построения ограничений для зависимых таблиц.

    >sh>./run.sh prep

Время исполнения несколько минут. После окончания переходим в
minibso/create/estmsize и выполняем:

    sh>./estart.sh

Время выполнения последнего скрипта соизмеримо по времени с
экспортом, с той лишь разницей, что данные не выгружаются. Затраты в 10
часов позволяют надеяться, что весь процесс создания “КОПИИ” уложится в
двое суток. После окончания, при помощи запросов из файла tabsizes.sql
смотрим итоговые объемы зависимых таблиц и таблиц, не попавших под
ограничения. Возможно, следует поправить insroot.sql и повторить.

Если инкарнация  "ОРИГИНАЛА" периодически обновляется, то оценку объема "КОПИИ" можно прервать.
Экспортировать промежуточные результаты работы:

    sh>./epause.sh

На новой инкарнации восстанавливаем данные и продолжаем расчет объема.

    sh>./econtinue.sh

Скрипт remove.sql предназначен для удаления вспомогательных
объектов после завершения работы.

### Экспорт данных

Определившись с описанием для insroot.sql, можно запускать выгрузку:

    sh>./run.sh exp

Если “ОРИГИНАЛ” не сильно перегружен, то можно запустить
экспорт двумя параллельными заданиями. Одно для схемы и одно для
данных. Для этого в строке 28 в позиции 19 скрипта run.sh сотрите
символ “#”. Сам экспорт данных тоже можно делать в несколько
параллельных заданий. Для этого в строках 21, 25 в позиции 24 скрипта
minibso/create/exp/tables/exp.sh сотрите символ “#”. Итого максимум
четыре задания, одно на схему и три на данные.

После выполнения скрипта в каталоге minibso/create/data
размещены все дампы и протоколы их выгрузки.

### Импорт данных

Активируем экземпляр Oracle c заготовкой и запускаем импорт данных

    sh>./run.sh imp

Импортируются последовательно схема и все таблицы. Протоколы
записываются в каталог minibso/create/data. На импорт схемы тратится
приблизительно 4 - 5 часов. Импорт данных занимает больше суток.
